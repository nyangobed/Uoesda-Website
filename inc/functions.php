<?php require_once 'db.php';error_reporting(E_ALL ^ E_NOTICE);function getPost(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->query("SELECT COUNT(*) as stpost FROM sitepost");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k['stpost'];}function getVideos(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->query("SELECT COUNT(*) as vidaz FROM videos");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k['vidaz'];}function getBotUsers(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->query("SELECT COUNT(*) as botUsers FROM users");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k['botUsers'];}function getEvents(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->query("SELECT COUNT(*) as evcount FROM events");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k['evcount'];}function secure_session(){$Votf2cfwx0tm="UoESDA";$V1aiymy0o1fk=FALSE;$Vrsfz2h0gclk=TRUE;$Vgg5ae1kugop=session_get_cookie_params();session_set_cookie_params($Vgg5ae1kugop["lifetime"],$Vgg5ae1kugop["path"],$Vgg5ae1kugop["domain"],$V1aiymy0o1fk,$Vrsfz2h0gclk);session_name($Votf2cfwx0tm);session_start();session_regenerate_id();}function getAdmin($Vg0kypuhaq2p=null){global $Vyynu4eo3hsx;if($Vg0kypuhaq2p!=null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM admtbl WHERE id=?");$V1fob0fom4ek->execute(array($Vg0kypuhaq2p));$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);}else{$Vycixnlt544k=array();$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM admtbl");$V1fob0fom4ek->execute();while($Vycixnlt544k_set=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k,$Vycixnlt544k_set);}}return $Vycixnlt544k;}function adminExist($Vqbs1szzjlxb){global $Vyynu4eo3hsx;$Vycixnlt544k=array();$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM admtbl WHERE username=?");$V1fob0fom4ek->execute(array($Vqbs1szzjlxb));$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k;}function getMessageCount(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->query("SELECT COUNT(*) as mesocount FROM messages WHERE read_status=0");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k['mesocount'];}function getMessages($Vc2lhg1q4u0u){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM messages ORDER BY id DESC ");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM messages  ORDER BY id DESC LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function getMessagebyID($Vg0kypuhaq2p){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM messages WHERE  id = ?");$V1fob0fom4ek->execute(array($Vg0kypuhaq2p));$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k;}function markRead($Vg0kypuhaq2p){global $Vyynu4eo3hsx;$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("UPDATE messages SET read_status=? WHERE id=?");$Vuz0qsipjn1u->execute(array(1,$Vg0kypuhaq2p));}function formatTime($Vey1paimbaku){return date("m/d/Y",$Vey1paimbaku);}function ErrorDisplay($Vsnz3rpw5b1a,$Vu5l0h0wo11a){if($Vsnz3rpw5b1a!=null){$Vigatzufi3n1="bg-danger";}elseif($Vu5l0h0wo11a!=null){$Vigatzufi3n1="bg-success";}else $Vigatzufi3n1=null;return $Vigatzufi3n1;}function SuccessDisplay($V3fangzufvwq){echo $V3fangzufvwq;}function getBotUserchatId($Vg0kypuhaq2p=null){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vg0kypuhaq2p==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT chat_id FROM users");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT chat_id FROM users WHERE id=?");$V1fob0fom4ek->execute(array($Vg0kypuhaq2p));while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function SendQuickMail($Voq2oyuqb1us,$Vkj5ooxqnemm,$V3fangzufvwq){require_once'../mailer/lib/swift_required.php';$V21z5ik5bait="info@uoesda.org";$V3vcihtzpz0e="OgWe^2p}!;p!";$Vjdx40pujb3v="UoESDA Church";$V1xr5mbmn3bi="uoesda.org";$Vwqctnhx1lp5=465;$V1mycyjnzhjl=Swift_SmtpTransport::newInstance($V1xr5mbmn3bi,$Vwqctnhx1lp5,'ssl');$V1mycyjnzhjl->setUsername($V21z5ik5bait);$V1mycyjnzhjl->setPassword($V3vcihtzpz0e);$Vki5gs31k50n=Swift_Message::newInstance();$Vki5gs31k50n->setTo($Voq2oyuqb1us);$Vki5gs31k50n->setSubject($Vkj5ooxqnemm);$Vki5gs31k50n->setBody($V3fangzufvwq,'text/html');$Vki5gs31k50n->setFrom($V21z5ik5bait,$Vjdx40pujb3v);$Vjpoyjx3jaf2=Swift_Mailer::newInstance($V1mycyjnzhjl);if($Vjpoyjx3jaf2->send($Vki5gs31k50n,$Vh1tutzn2anz)){$Vjeiemsvwiuz=true;}else $Vjeiemsvwiuz=false;return $Vjeiemsvwiuz;}function InsertContent($Vonjitk0nbjc=null,$Vfvyemyjqroe=array()){global $Vyynu4eo3hsx;if($Vonjitk0nbjc=="sitepost"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO sitepost(id,blgid,pst_title,pst_cat,pst_content,blog_img,post_date,posted_by) VALUES(?,?,?,?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="audios"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO audios(id,aud_title,aud_desc,aud_link,post_date) VALUES(?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="videos"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO videos(id,vid_title,vid_link,post_date) VALUES(?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="events"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO events(id,ev_title,ev_desc,ev_start,ev_end,post_date) VALUES(?,?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="AddAdmin"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO admtbl(id,username,password,email,ad_names,prof_pic) VALUES(?,?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="SendMessage"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO messages(id,sender_names,sender_mail,sender_subject,sender_message,sent_date) VALUES(?,?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}elseif($Vonjitk0nbjc=="comments"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("INSERT INTO comments(id,blgid,u_name,u_mail,u_comment,u_avatar,post_date) VALUES (?,?,?,?,?,?,?)");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}else return false;}function ValidateEmail($Vkrte1wjbssxmail){if(strlen($Vkrte1wjbssxmail)>7&&strstr($Vkrte1wjbssxmail,"@")&&strstr($Vkrte1wjbssxmail,".")){return true;}return false;}function ValidateProfilePic($Vvscqcrbz03t,$Vkrte1wjbssxxtension){$V3f2fc4xk1mw=1024000;$Vcm3kndod0qg=array(".jpeg",".jpg",".png",".gif");if($Vvscqcrbz03t<=$V3f2fc4xk1mw&&in_array(strtolower($Vkrte1wjbssxxtension),$Vcm3kndod0qg)){return true;}else return false;}function ValidateFile($Vk1ayuiuai2t,$Vvscqcrbz03t,$Vkrte1wjbssxxtension){if($Vk1ayuiuai2t=="audio"){$Vdwnnkpdxjj5=20480000;$Vcm3kndod0qg=array(".mp3",".mp4",".m4a",".ogg");if($Vvscqcrbz03t<=$Vdwnnkpdxjj5&&in_array(strtolower($Vkrte1wjbssxxtension),$Vcm3kndod0qg)){return true;}else return false;}elseif($Vk1ayuiuai2t=="video"){$V5uuvkix411w=102400000;$Vcm3kndod0qg=array(".mp3",".mp4",".m4a",".ogg");if($Vvscqcrbz03t<=$V5uuvkix411w&&in_array(strtolower($Vkrte1wjbssxxtension),$Vcm3kndod0qg)){return true;}else return false;}elseif($Vk1ayuiuai2t=="picture"){$V3f2fc4xk1mw=20480000;$Vcm3kndod0qg=array(".jpeg",".jpg",".png",".gif");if($Vvscqcrbz03t<=$V3f2fc4xk1mw&&in_array(strtolower($Vkrte1wjbssxxtension),$Vcm3kndod0qg)){return true;}else return false;}else return false;}function UpdateData($Vonjitk0nbjc=null,$Vfvyemyjqroe=array()){global $Vyynu4eo3hsx;if($Vonjitk0nbjc=="ChangeAdminPass"){try{$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("UPDATE admtbl SET password=? WHERE id=?");$Vuz0qsipjn1u->execute($Vfvyemyjqroe);return true;}catch(Exception $Vkrte1wjbssx){return false;}}else return false;}function pullEvents($Vc2lhg1q4u0u){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();$V3vmrz103wyp=time();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM events WHERE ev_start >=? ");$V1fob0fom4ek->execute(array($V3vmrz103wyp));while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM events WHERE ev_start >=? LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute(array($V3vmrz103wyp));while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function getLatestNews(){global $Vyynu4eo3hsx;$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM sitepost WHERE pst_cat='news' ORDER BY id DESC");$V1fob0fom4ek->execute();$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);return $Vycixnlt544k;}function pullVideos($Vc2lhg1q4u0u){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM videos ");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM videos LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function pullBlogPost($Vc2lhg1q4u0u){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM sitepost WHERE pst_cat='blog' ORDER BY ID DESC ");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM sitepost WHERE pst_cat='blog' ORDER BY ID DESC LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function pullSpecificBlogPost($V0hgoojb4vqn){global $Vyynu4eo3hsx;if($V0hgoojb4vqn!=null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM sitepost WHERE pst_cat='blog' AND blgid=? ORDER BY ID DESC ");$V1fob0fom4ek->execute(array($V0hgoojb4vqn));$Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC);}else $Vycixnlt544k=null;return $Vycixnlt544k;}function checkBlogById($V0hgoojb4vqn){global $Vyynu4eo3hsx;$Vuz0qsipjn1u=$Vyynu4eo3hsx->prepare("SELECT * FROM sitepost WHERE blgid=?");$Vuz0qsipjn1u->execute(array($V0hgoojb4vqn));if($Vuz0qsipjn1u->rowCount()>0){return true;}else return false;}function pullAudioFiles($Vc2lhg1q4u0u){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM audios ORDER BY ID DESC ");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM audios ORDER BY ID DESC LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute();while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}function PullUserComments($Vc2lhg1q4u0u,$V0hgoojb4vqn){global $Vyynu4eo3hsx;$Vycixnlt544k_array=array();if($Vc2lhg1q4u0u==null){$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM comments WHERE blgid=? ORDER BY ID DESC ");$V1fob0fom4ek->execute(array($V0hgoojb4vqn));while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}else{$V1fob0fom4ek=$Vyynu4eo3hsx->prepare("SELECT * FROM comments WHERE blgid=? ORDER BY ID DESC LIMIT $Vc2lhg1q4u0u");$V1fob0fom4ek->execute(array($V0hgoojb4vqn));while($Vycixnlt544k=$V1fob0fom4ek->fetch(PDO::FETCH_ASSOC)){array_push($Vycixnlt544k_array,$Vycixnlt544k);}}return $Vycixnlt544k_array;}